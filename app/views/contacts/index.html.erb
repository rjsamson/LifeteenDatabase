
<style type="text/css">
div#wrap{margin:0px auto;}
</style>

<h2>Contacts</h2>
  <div id="wrap">
  <%= render 'sub' %>
  </div>



<script type="text/javascript">
var page = 0;
function yHandler(){
  // Watch video for line by line explanation of the code
  // http://www.youtube.com/watch?v=eziREnZPml4
  var wrap = document.getElementById("wrap");
  var contentHeight = wrap.offsetHeight;
  var yOffset = window.pageYOffset; 
  var y = yOffset + window.innerHeight;
  if(y >= contentHeight){
    page = page + 1;
    // Ajax call to get more dynamic data goes here
    $.get("/sub_contacts?p="+page, "", function(newhtml){
            document.getElementById("wrap").innerHTML += newhtml; 
            //alert($("#wrap").innerHTML);  
        });
  }
}
window.onscroll = yHandler;
</script>